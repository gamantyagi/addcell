{% extends 'clubcell/base_up.html' %}
{% load static %}
{% block content %}
{% load mathfilters %}


<style xmlns="http://www.w3.org/1999/html">
#card {
    display:flex;
  text-align:center;
  width: 30vw;
  height: 45vw;
  min-width: 75px;
  min-height: 100px;
  max-width: 200px;
  max-height: 250px;
  text-align: center;
  font-family: arial;
  overflow: hidden;
}

#title {
  color: grey;
  font-size: 15px;
}

#buttoncrd {
  border: none;
  outline: 0;
  width: 100%;
  color: white;
  background-color: #0052cc;
  text-align: center;
  cursor: pointer;
  font-size: 18px;
}



#buttoncrd:hover, .acrd:hover {
  opacity: 0.7;
}
</style>




<div style="max-width:900px;margin-left: auto; margin-right: auto;">

    <div class="carousel slide" data-ride="carousel" id="carousel-1" style="max-height: 50vh;max-width:900px; margin-left: auto; margin-right: auto;">
        <div class="carousel-inner" role="listbox" style="max-height:50vh;max-width:900px; margin-left: auto; margin-right: auto;">
            <div class="carousel-item active"><img class="w-100 d-block" src="{% static 'assets/img/img_001.jpg' %}" alt="Slide Image"></div>
            <div class="carousel-item"><img class="w-100 d-block" src="{% static 'assets/img/img_002.jpg' %}" alt="Slide Image"></div>
            <div class="carousel-item"><img class="w-100 d-block" src="{% static 'assets/img/img_003.jpg' %}" alt="Slide Image"></div>
        <ol class="carousel-indicators d-xl-flex" style="margin: 0%;">
            <li data-target="#carousel-1" data-slide-to="0" class="active"></li>
            <li data-target="#carousel-1" data-slide-to="1"></li>
            <li data-target="#carousel-1" data-slide-to="2"></li>
        </ol>
            <div><a class="carousel-control-prev" href="#carousel-1" role="button" data-slide="prev" style="width: 45%;"><span class="carousel-control-prev-icon"></span><span class="sr-only">Previous</span></a><a class="carousel-control-next" href="#carousel-1"
                role="button" data-slide="next" style="width: 45%;"><span class="carousel-control-next-icon"></span><span class="sr-only">Next</span></a></div>

        </div>

    </div>
    <div class="card">
        <div class="card-body">
            <div class="media">

                <div class="media-body" style="display: flex;">
                    <div class="card" id="card">
                        <img src="{% static 'assets/img/user-photo2.jpg' %}" alt="John" style="width:100%; height:50%;">
                              <span style="font-size:16px;">{{event.club.clubname}}</span>
                              <span class="title" id="title" style="font-size:10px;">{{event.club.off_email}}</span>
                              <span style="font-size:10px;">{{event.club.tel}}</span>

                            <button id="buttoncrd" style="position: absolute; bottom:0;">+ Add Cell</button>
                            </div>
                    <div id="event_name" style="margin-left:5px;"><h1 style="font-size: 4vw;">{{event.eventname}}</h1><h5 style="color:grey;">{{event.event_uen}}</h5><h6>{{event.breif_about}}</h6></div>

                </div>
            </div>
            <div><small>Reputation<i class="fa fa-info-circle text-info"></i></small>
                <div class="progress progress-high"1>
                    <div class="progress-bar bg-{% if event.club.rating < 5 %}danger{% elif event.club.rating > 4 and event.club.rating < 7 %}warning{% else %}info{% endif %}" aria-valuenow="{{event.club.rating}}" aria-valuemin="0" aria-valuemax="100" style="width: {{event.club.rating|mul:10}}%;"><span class="sr-only">90%</span></div>
                </div>
            </div>
            <hr>
            {% autoescape off %}
            <p>{{event.event_detail}}</p>
            {% endautoescape %}
        </div>
        <div class="card-footer"><span class="text-muted"><i class="fa fa-calendar fa-fw"></i><u>Held on:</u>:<font color="blue"> {{event.heldon}}</font><br><u>Fees:</u>:<font color="blue"> {% if event.paid == True %}â‚¹{{event.fee}}{% else %}Free{% endif %}</font>
            {% if event.certificate == True %}<br><span class="badge badge-success">Certificate available</span>{% endif %}
            {% if event.dl == True %}<br><span class="badge badge-success">Duty leave available</span>{% endif %}

</span>
            <div class="media"></div>
        </div>
    </div><button type="button" onclick="window.open('{{path}}/messages/chat/{{event.club.user.username}}','popUpWindow','height=600,width=500,left=10,top=10,,,menubar=no'); return false;" class="btn-outline-success" style="width:50%;">Message</button>{% if event_detail.event_id not in event_register %}<button type="button" class="btn-outline-success" value="{{event_detail.event_id}}" id="rg{{event_detail.event_UAP}}" style="width:50%;">Register</button>{% else %}<button type="button" class="btn-outline-success" style="width:50%; background-color:green;color:white" disabled>Registered</button>{% endif %}

</div>

{% if event_detail.event_id not in event_register %}
<script>
    $(document).ready(function(){
  $("#rg{{event_detail.event_UAP}}").click(function(){
  var elmValue = $(this).attr("value");
  $.ajax({
            url: "{{path}}/student/ajax/ajax_event_register",
            type: "GET",
            data: {
                element: elmValue
            },
            success: function(result) {
            if(result == "wrong"){
               alert("Something gone wrong");
            }
            else if(result == "closed"){
               alert("registration closed, not registered.");
            }
            else{
                $("#rg" + result).html("<b>Registered</b>");
                $("#rg" + result).attr("disabled",true);
                $("#rg" + result).css("background-color","green");
                $("#rg" + result).css("color","white");}
                },
            error: function(result){
                alert("something gone wrong");}
            });

  });

});
</script>

{% endif %}

{% endblock %}